<!DOCTYPE html> <html lang="zh-CN"><head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Á¨¨‰∫å‰ª£ËΩªËµ∑ÂßãÈ°µ</title> <style> * { margin: 0; padding: 0; box-sizing: border-box; } body { background-color: #1a1a1a; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; color: #fff; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; transition: all 0.5s ease; } body.search-mode { background-color: #fff9e6; background-size: cover; background-position: center; background-repeat: no-repeat; } body.search-mode.bg1 { background-image: url('/src/bgg2.jpg'); } body.search-mode.bg2 { background-image: url('/src/bgg3.jpg'); } body.search-mode.bg3 { background-image: url('/src/bgg4.jpg'); } body.search-mode.custom-bg { background-size: cover; background-position: center; background-repeat: no-repeat; } .nextgen-badge { position: fixed; right: 60px; top: 16px; background-color: #ff4444; color: white; padding: 6px 10px; border-radius: 4px; font-size: 13px; font-weight: bold; box-shadow: 0 2px 6px rgba(0,0,0,0.3); z-index: 100; } .settings-btn { position: fixed; right: 20px; top: 16px; width: 32px; height: 32px; background: linear-gradient(135deg, #4da6ff, #3a8ae6); border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; color: white; box-shadow: 0 2px 6px rgba(0,0,0,0.3); z-index: 101; transition: all 0.3s ease; } .settings-btn:hover { transform: scale(1.1); box-shadow: 0 4px 10px rgba(77, 166, 255, 0.5); } .settings-btn::before { content: '‚öôÔ∏è'; } .greeting { position: fixed; top: 16px; left: 50%; transform: translateX(-50%); font-size: 20px; font-weight: bold; color: #ffd700; opacity: 0; transition: opacity 0.5s ease, transform 0.5s ease; z-index: 90; } .greeting.show { opacity: 1; transform: translateX(-50%) translateY(0); } .logo { cursor: pointer; user-select: none; transition: transform 0.2s ease; z-index: 50; position: relative; display: inline-block; margin-top: 60px; } .logo:hover { transform: scale(1.05); } .logo span:first-child { color: #ffd700; font-weight: bold; font-size: 56px; transition: all 0.3s ease; } .logo span:last-child { color: #ffffff; font-weight: bold; font-size: 48px; transition: all 0.3s ease; } .logo.gradient span { background: linear-gradient(90deg, #ffd700, #ffcc00, #ffb800, #ffa500, #ff8c00); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-size: 300% 100%; animation: gradientShift 0.5s ease infinite; } @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } } .search-container { margin-top: 24px; width: 400px; max-width: 90%; opacity: 0; transform: translateY(-20px); transition: all 0.4s ease; z-index: 70; position: relative; } .search-container.active { opacity: 1; transform: translateY(0); } .search-box { display: flex; background-color: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 6px 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.2); align-items: center; width: 100%; position: relative; } .engine-toggle-btn { width: 36px; height: 36px; background: linear-gradient(135deg, #4da6ff, #3a8ae6); border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; margin-right: 10px; box-shadow: 0 3px 10px rgba(77, 166, 255, 0.4); transition: all 0.3s ease; position: relative; z-index: 100; } .engine-toggle-btn:hover { transform: scale(1.1); box-shadow: 0 5px 12px rgba(77, 166, 255, 0.6); } .engine-toggle-btn::before { content: '‚â°'; font-size: 18px; color: white; font-weight: bold; } .engine-circle-menu { position: absolute; left: -120px; top: 50%; transform: translateY(-50%) scale(0); width: 180px; height: 180px; display: block; z-index: 9999; opacity: 0; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); } .engine-circle-menu.active { opacity: 1; transform: translateY(-50%) scale(1); } .engine-circle-item { position: absolute; left: 50%; top: 50%; width: 46px; height: 46px; border-radius: 50%; background: white; display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 10px rgba(0,0,0,0.2); cursor: pointer; transform: translate(-50%, -50%); transition: all 0.3s ease; z-index: 10; overflow: hidden; } .engine-circle-item:hover { transform: translate(-50%, -50%) scale(1.2); box-shadow: 0 5px 16px rgba(0,0,0,0.4); z-index: 20; } .engine-circle-item img { width: 32px; height: 32px; border-radius: 50%; object-fit: contain; } .engine-circle-item.add-btn { background: linear-gradient(135deg, #ffd700, #ffb800); color: #000; font-size: 24px; font-weight: bold; } .engine-circle-item span { position: absolute; bottom: -30px; left: 50%; transform: translateX(-50%); font-size: 11px; color: #333; white-space: nowrap; background: rgba(255,255,255,0.95); padding: 3px 6px; border-radius: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); opacity: 0; transition: opacity 0.2s; } .engine-circle-item:hover span { opacity: 1; } .remove-engine-btn { position: absolute; top: -5px; right: -5px; width: 18px; height: 18px; background: rgba(255, 68, 68, 0.9); border: 2px solid #1a1a1a; border-radius: 50%; color: white; font-size: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: all 0.2s ease; z-index: 30; } .engine-circle-item.custom-engine:hover .remove-engine-btn { opacity: 1; transform: scale(1.2); } .engine-circle-item.custom-engine:hover .remove-engine-btn:hover { background: rgba(220, 40, 40, 0.95); transform: scale(1.3); } .circle-menu-close-btn { position: absolute; top: -8px; right: -8px; width: 24px; height: 24px; background: linear-gradient(135deg, #ff4444, #cc0000); border: 2px solid #1a1a1a; border-radius: 50%; color: white; font-size: 16px; font-weight: bold; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.3); z-index: 10000; transition: all 0.2s ease; } .circle-menu-close-btn:hover { transform: scale(1.15); box-shadow: 0 5px 10px rgba(255, 68, 68, 0.5); } .search-input-container { flex: 1; display: flex; align-items: center; } .search-input { flex: 1; background-color: transparent; border: none; color: #333; font-size: 16px; padding: 10px 12px; outline: none; width: 100%; cursor: pointer; } .search-input:focus { cursor: text; } .search-input::placeholder { color: #999; } .search-history-container { position: absolute; top: 100%; left: 0; right: 0; background-color: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); margin-top: 8px; padding: 8px 0; max-height: 300px; overflow-y: auto; z-index: 50; display: none; opacity: 0; transform: translateY(-10px); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); } .search-history-container.active { display: block; opacity: 1; transform: translateY(0); } .search-history-title { padding: 8px 16px; font-size: 13px; color: #666; border-bottom: 1px solid #eee; font-weight: 500; } .search-history-item { padding: 10px 16px; font-size: 14px; color: #333; cursor: pointer; transition: background-color 0.2s; display: flex; align-items: center; } .search-history-item:hover { background-color: #f5f5f5; } .search-history-item::before { content: 'üîç'; margin-right: 8px; font-size: 14px; } .search-suggestion-item { padding: 10px 16px; font-size: 14px; color: #333; cursor: pointer; transition: background-color 0.2s; display: flex; align-items: center; background-color: #f9f9f9; border-left: 3px solid #4da6ff; } .search-suggestion-item:hover { background-color: #e8f4ff; } .search-suggestion-item.bookmark-item::before { content: 'üîñ'; margin-right: 8px; font-size: 14px; } .search-suggestion-item.smart-item::before { content: 'üåê'; margin-right: 8px; font-size: 14px; } .search-history-clear { padding: 8px 16px; font-size: 13px; color: #ff4444; cursor: pointer; text-align: center; border-top: 1px solid #eee; font-weight: 500; transition: background-color 0.2s; } .search-history-clear:hover { background-color: #ffebee; } .digital-clock { margin-top: 24px; font-family: 'Courier New', monospace; font-size: 40px; font-weight: bold; color: #ffd700; letter-spacing: 1.5px; opacity: 1; transition: opacity 0.3s ease; z-index: 30; } .digital-clock.hidden { opacity: 0; } .simple-clock { position: fixed; bottom: 16px; left: 16px; font-family: 'Courier New', monospace; font-size: 20px; font-weight: bold; color: rgba(255, 215, 0, 0.9); opacity: 0; transition: opacity 0.3s ease; z-index: 30; letter-spacing: 1px; } .simple-clock.show { opacity: 1; } .bookmarks-container { margin-top: 32px; display: flex; flex-wrap: wrap; gap: 14px; justify-content: center; max-width: 384px; opacity: 0; transform: translateY(20px); transition: all 0.4s ease; z-index: 60; } .bookmarks-container.active { opacity: 1; transform: translateY(0); } .bookmark-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; } .bookmark { width: 80px; height: 80px; background-color: rgba(255, 255, 255, 0.9); border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 10px; cursor: pointer; transition: all 0.2s ease; overflow: hidden; box-shadow: 0 3px 10px rgba(0,0,0,0.15); } .bookmark:hover { transform: translateY(-3px); box-shadow: 0 5px 14px rgba(0,0,0,0.2); } .bookmark-icon { width: 40px; height: 40px; margin-bottom: 6px; border-radius: 8px; background-color: #e0e0e0; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #666; overflow: hidden; background-size: cover; background-position: center; background-repeat: no-repeat; } .bookmark-name { text-align: center; font-size: 13px; font-weight: 500; color: #333; word-break: break-word; max-height: 32px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; } .bookmark-menu-btn { width: 24px; height: 24px; background-color: #4da6ff; border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 12px; color: white; margin-top: 6px; transition: all 0.2s ease; } .bookmark-menu-btn:hover { background-color: #3a8ae6; transform: scale(1.1); } .bookmark-menu { position: absolute; bottom: -110px; left: 50%; transform: translateX(-50%); background-color: #fff; border-radius: 8px; box-shadow: 0 4px 16px rgba(0,0,0,0.2); padding: 8px 0; min-width: 100px; display: none; z-index: 9000; border: 1px solid #ddd; white-space: nowrap; } .bookmark-menu.active { display: block; } .bookmark-menu-item { padding: 8px 14px; cursor: pointer; transition: background-color 0.2s; font-size: 13px; color: #333; } .bookmark-menu-item:hover { background-color: #f5f5f5; } .add-bookmark { width: 80px; height: 80px; background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid #ffd700; box-shadow: 0 3px 10px rgba(255, 215, 0, 0.2); position: relative; overflow: hidden; } .add-bookmark::before { content: '+'; font-size: 52px; color: #ffd700; font-weight: bold; position: relative; z-index: 2; } .add-bookmark::after { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%); opacity: 0; transition: opacity 0.3s ease; } .add-bookmark:hover::after { opacity: 1; } .add-bookmark:hover { transform: scale(1.05); box-shadow: 0 5px 16px rgba(255, 215, 0, 0.4); border-color: #ffcc00; } .update-panel { position: fixed; bottom: 24px; right: 24px; background-color: rgba(255, 255, 255, 0.95); border-radius: 10px; padding: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.2); max-width: 280px; z-index: 60; opacity: 1; transition: all 0.4s ease; } .update-panel.hidden { opacity: 0; pointer-events: none; } .update-title { font-size: 15px; font-weight: bold; color: #ff4444; margin-bottom: 10px; border-bottom: 2px solid #ffd700; padding-bottom: 6px; } .update-content { font-size: 13px; color: #333; line-height: 1.5; } .update-beta { margin-top: 10px; padding-top: 10px; border-top: 2px dashed #ffd700; font-size: 12px; color: #ff4444; font-weight: bold; } .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.7); display: none; align-items: center; justify-content: center; z-index: 2000; } .modal-overlay.active { display: flex; } .modal { background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%); border-radius: 14px; padding: 28px; width: 380px; max-width: 90%; box-shadow: 0 8px 28px rgba(0,0,0,0.2); border: 1px solid #ddd; } .modal-title { font-size: 19px; font-weight: bold; margin-bottom: 20px; color: #ff4444; text-align: center; } .modal-input-group { margin-bottom: 14px; } .modal-label { display: block; margin-bottom: 6px; font-size: 13px; color: #666; } .modal-input { width: 100%; padding: 10px 14px; background-color: #fff; border: 1px solid #ddd; border-radius: 8px; color: #333; font-size: 15px; outline: none; transition: all 0.2s; } .modal-input:focus { border-color: #ffd700; box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2); } .modal-buttons { display: flex; gap: 10px; margin-top: 20px; } .modal-btn { flex: 1; padding: 10px; border: none; border-radius: 8px; font-size: 15px; font-weight: bold; cursor: pointer; transition: all 0.2s; } .modal-btn-cancel { background-color: #f0f0f0; color: #333; } .modal-btn-cancel:hover { background-color: #e0e0e0; transform: translateY(-2px); } .modal-btn-confirm { background: linear-gradient(135deg, #ffd700 0%, #ffb800 100%); color: #000; } .modal-btn-confirm:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(255, 215, 0, 0.4); } .engine-btn { background: none; border: none; cursor: pointer; padding: 0; margin: 0; } .current-engine-display { position: absolute; right: 14px; top: 50%; transform: translateY(-50%); display: flex; align-items: center; font-size: 13px; color: #666; } .current-engine-display img { width: 18px; height: 18px; border-radius: 50%; margin-right: 5px; } .settings-modal .setting-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; } .settings-modal .setting-item:last-child { border-bottom: none; } .settings-modal .setting-label { font-size: 15px; color: #333; font-weight: 500; margin-right: 12px; } .settings-modal .setting-unfinished { font-size: 11px; color: #ff4444; margin-left: 6px; font-weight: normal; } .background-options { display: flex; gap: 8px; margin-top: 8px; margin-bottom: 16px; } .background-option { width: 60px; height: 40px; border-radius: 6px; border: 2px solid #ddd; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 11px; color: #666; transition: all 0.2s; } .background-option.active { border-color: #ffd700; box-shadow: 0 0 0 2px #ffd700; transform: scale(1.05); } .background-option.pure { background-color: #fff9e6; } .background-option.bg1 { background: linear-gradient(45deg, #6a11cb 0%, #2575fc 100%); } .background-option.bg2 { background: linear-gradient(45deg, #11998e 0%, #38ef7d 100%); } .background-option.bg3 { background: linear-gradient(45deg, #ff512f 0%, #f09819 100%); } .custom-bg-input-group { margin-top: 12px; margin-bottom: 12px; } .custom-bg-input { width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; margin-top: 6px; } .custom-bg-apply-btn { width: 100%; padding: 8px; background: linear-gradient(135deg, #4da6ff, #3a8ae6); color: white; border: none; border-radius: 6px; font-size: 14px; margin-top: 8px; cursor: pointer; transition: all 0.2s; } .custom-bg-apply-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(77, 166, 255, 0.4); } .switch { position: relative; display: inline-block; width: 48px; height: 26px; } .switch input { opacity: 0; width: 0; height: 0; } .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; } .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; } input:checked + .slider { background-color: #4da6ff; } input:checked + .slider:before { transform: translateX(22px); } </style> </head>
<body> <div class="nextgen-badge">1.2.5AExp</div> <button class="settings-btn" id="settingsBtn"></button> <div class="greeting" id="greeting"></div> <div class="logo" id="quickerchLogo"> <span>Quick</span><span>erch</span> </div> <div id="dynamicContent"></div> <div class="digital-clock" id="digitalClock">00:00:00</div> <div class="simple-clock" id="simpleClock">00:00</div> <div class="update-panel" id="updatePanel"> <div class="update-title">üöÄ ÁâàÊú¨Êõ¥Êñ∞</div> <div class="update-content">Êñ∞Â¢ûÊêúÁ¥¢ÂéÜÂè≤ËÆ∞ÂΩïÂíå"Áåú‰Ω†ÊÉ≥Êêú"ÂäüËÉΩ</div> <div class="update-beta">üåü BetaÁâàÂç≥Â∞ÜÂà∞Êù•</div> </div> <div class="modal-overlay" id="modalOverlay"> <div class="modal"> <div class="modal-title" id="modalTitle">Ê∑ªÂä†‰π¶Á≠æ</div> <div class="modal-input-group"> <label class="modal-label">ÂêçÁß∞</label> <input type="text" class="modal-input" id="bookmarkNameInput" placeholder="ËæìÂÖ•‰π¶Á≠æÂêçÁß∞"> </div> <div class="modal-input-group"> <label class="modal-label">URL</label> <input type="text" class="modal-input" id="bookmarkUrlInput" placeholder="ËæìÂÖ•ÁΩëÂùÄÔºå‰æãÂ¶ÇÔºöhttps://www.baidu.com"> </div> <div class="modal-buttons"> <button class="modal-btn modal-btn-cancel" id="modalCancelBtn">ÂèñÊ∂à</button> <button class="modal-btn modal-btn-confirm" id="modalConfirmBtn">Á°ÆÂÆö</button> </div> </div> </div> <div class="modal-overlay" id="customEngineModal"> <div class="modal"> <div class="modal-title">Ê∑ªÂä†Ëá™ÂÆö‰πâÊêúÁ¥¢ÂºïÊìé</div> <div class="modal-input-group"> <label class="modal-label">ÂêçÁß∞</label> <input type="text" class="modal-input" id="customEngineName" placeholder="‰æãÂ¶ÇÔºöGoogle"> </div> <div class="modal-input-group"> <label class="modal-label">ÊêúÁ¥¢URLÔºà‰ΩøÁî® {query} ‰Ωú‰∏∫Âç†‰ΩçÁ¨¶Ôºâ</label> <input type="text" class="modal-input" id="customEngineUrl" placeholder="‰æãÂ¶ÇÔºöhttps://www.google.com/search?q={query}"> </div> <div class="modal-buttons"> <button class="modal-btn modal-btn-cancel" id="customEngineCancelBtn">ÂèñÊ∂à</button> <button class="modal-btn modal-btn-confirm" id="customEngineConfirmBtn">Á°ÆÂÆö</button> </div> </div> </div> <div class="modal-overlay" id="settingsModal"> <div class="modal settings-modal"> <div class="modal-title">ËÆæÁΩÆ</div> <div class="setting-item"> <span class="setting-label">ÊòØÂê¶ÂêØÁî®ÈóÆÂÄôËØ≠</span> <label class="switch"> <input type="checkbox" id="greetingToggle"> <span class="slider"></span> </label> </div> <div class="setting-item"> <span class="setting-label">ÊòØÂê¶ÂêØÁî®Á∫ØÂáÄÊ®°Âºè</span> <label class="switch"> <input type="checkbox" id="pureModeToggle"> <span class="slider"></span> </label> </div> <div class="setting-item"> <div> <span class="setting-label">ÊêúÁ¥¢Ê®°ÂºèËÉåÊôØ</span> <span class="setting-unfinished">ÔºàÊú™ÂÆåÂ∑•Ôºâ</span> </div> </div> <div class="background-options"> <div class="background-option pure active" data-bg="pure">Á∫ØËâ≤</div> <div class="background-option bg1" data-bg="bg1">ËÉåÊôØ1</div> <div class="background-option bg2" data-bg="bg2">ËÉåÊôØ2</div> <div class="background-option bg3" data-bg="bg3">ËÉåÊôØ3</div> </div> <div class="custom-bg-input-group"> <label class="modal-label">Ëá™ÂÆö‰πâËÉåÊôØURL</label> <input type="text" class="modal-input custom-bg-input" id="customBgUrl" placeholder="ËæìÂÖ•ÂõæÁâáURLÔºå‰æãÂ¶ÇÔºöhttps://example.com/bg.jpg"> <div style="display: flex; gap: 8px; margin-top: 8px;"> <label class="switch" style="margin-right: 8px;"> <input type="checkbox" id="customBgSearchMode"> <span class="slider"></span> </label> <span style="font-size: 13px; color: #666;">Áî®‰ΩúÊêúÁ¥¢Ê®°ÂºèËÉåÊôØ</span> </div> <button class="custom-bg-apply-btn" id="applyCustomBgBtn">Â∫îÁî®ËÉåÊôØ</button> </div> <div class="setting-item"> <button class="modal-btn modal-btn-confirm" id="clearHistoryBtn" style="width:100%; padding:8px; background:linear-gradient(135deg, #ff4444, #cc0000); color:white; border:none; border-radius:8px; font-size:14px; margin-top:8px;"> Ê∏ÖÈô§ÊêúÁ¥¢ËÆ∞ÂΩï </button> </div> <div class="modal-buttons"> <button class="modal-btn modal-btn-cancel" id="settingsCancelBtn">ÂÖ≥Èó≠</button> </div> </div> </div> </body>
<script> const logo = document.getElementById('quickerchLogo'); const dynamicContent = document.getElementById('dynamicContent'); const digitalClock = document.getElementById('digitalClock'); const simpleClock = document.getElementById('simpleClock'); const greetingEl = document.getElementById('greeting'); const modalOverlay = document.getElementById('modalOverlay'); const modalTitle = document.getElementById('modalTitle'); const bookmarkNameInput = document.getElementById('bookmarkNameInput'); const bookmarkUrlInput = document.getElementById('bookmarkUrlInput'); const modalCancelBtn = document.getElementById('modalCancelBtn'); const modalConfirmBtn = document.getElementById('modalConfirmBtn'); const updatePanel = document.getElementById('updatePanel'); const customEngineModal = document.getElementById('customEngineModal'); const customEngineName = document.getElementById('customEngineName'); const customEngineUrl = document.getElementById('customEngineUrl'); const customEngineCancelBtn = document.getElementById('customEngineCancelBtn'); const customEngineConfirmBtn = document.getElementById('customEngineConfirmBtn'); const settingsBtn = document.getElementById('settingsBtn'); const settingsModal = document.getElementById('settingsModal'); const greetingToggle = document.getElementById('greetingToggle'); const pureModeToggle = document.getElementById('pureModeToggle'); const settingsCancelBtn = document.getElementById('settingsCancelBtn'); const backgroundOptions = document.querySelectorAll('.background-option'); const clearHistoryBtn = document.getElementById('clearHistoryBtn'); const applyCustomBgBtn = document.getElementById('applyCustomBgBtn'); let isSearchMode = false; let clockInterval = null; let simpleClockInterval = null; let greetingTimeout = null; let currentEditBookmark = null; let circleAnimationId = null; let circleStartTime = 0; let isPureModeLocked = false; let settings = { enableGreeting: true, enablePureMode: false, searchBackground: 'pure', customBackgroundUrl: '', useCustomBgInSearchMode: false }; let searchHistory = JSON.parse(localStorage.getItem('quickerch_search_history') || '[]'); let searchEngines = [ { name: 'ÁôæÂ∫¶', icon: 'https://www.baidu.com/favicon.ico', url: 'https://www.baidu.com/s?wd={query}' }, { name: 'Bing', icon: 'https://cn.bing.com/favicon.ico', url: 'https://cn.bing.com/search?q={query}' }, { name: 'Yandex', icon: 'https://yandex.com/favicon.ico', url: 'https://yandex.com/search/?text={query}' } ]; function loadSettings() { const savedSettings = localStorage.getItem('quickerch_settings'); if (savedSettings) { try { settings = JSON.parse(savedSettings); } catch (e) { console.error('Failed to parse settings:', e); } } greetingToggle.checked = settings.enableGreeting; pureModeToggle.checked = settings.enablePureMode; isPureModeLocked = settings.enablePureMode;  const customBgUrlInput = document.getElementById('customBgUrl'); const customBgSearchMode = document.getElementById('customBgSearchMode'); if (customBgUrlInput && settings.customBackgroundUrl) { customBgUrlInput.value = settings.customBackgroundUrl; } if (customBgSearchMode && settings.useCustomBgInSearchMode !== undefined) { customBgSearchMode.checked = settings.useCustomBgInSearchMode; } backgroundOptions.forEach(option => { option.classList.remove('active'); if (option.dataset.bg === settings.searchBackground) { option.classList.add('active'); } }); if (settings.enablePureMode) { digitalClock.classList.add('hidden'); simpleClock.classList.add('show'); updateSimpleClock(); simpleClockInterval = setInterval(updateSimpleClock, 60000); if (!isSearchMode) { toggleSearchMode(); } } } function saveSettings() { localStorage.setItem('quickerch_settings', JSON.stringify(settings)); } function loadCustomEngines() { const customEngines = JSON.parse(localStorage.getItem('quickerch_custom_engines') || '[]'); searchEngines = [ { name: 'ÁôæÂ∫¶', icon: 'https://www.baidu.com/favicon.ico', url: 'https://www.baidu.com/s?wd={query}' }, { name: 'Bing', icon: 'https://cn.bing.com/favicon.ico', url: 'https://cn.bing.com/search?q={query}' }, { name: 'Yandex', icon: 'https://yandex.com/favicon.ico', url: 'https://yandex.com/search/?text={query}' }, ...customEngines ]; } function initSearchEngine() { const savedEngine = localStorage.getItem('quickerch_search_engine'); if (savedEngine) { try { const engineData = JSON.parse(savedEngine); return engineData; } catch (e) { console.error('Failed to parse saved engine:', e); } } return searchEngines[0]; } function createSearchContainer() { const currentEngine = initSearchEngine(); const container = document.createElement('div'); container.className = 'search-container'; container.id = 'searchContainer'; container.innerHTML = ` <div class="search-box"> <button class="engine-toggle-btn" id="engineToggleBtn"></button> <div class="engine-circle-menu" id="engineCircleMenu"> <div class="circle-menu-close-btn" id="circleMenuCloseBtn">√ó</div> </div> <div class="search-input-container"> <input type="text" class="search-input" id="searchInput" placeholder="ÁÇπÂáªËæìÂÖ•ÊêúÁ¥¢ÂÜÖÂÆπ..." autocomplete="off"> </div> <div class="current-engine-display" id="currentEngineDisplay"> <img src="${currentEngine.icon}" alt="${currentEngine.name}"> <span>${currentEngine.name}</span> </div> </div> <div class="search-history-container" id="searchHistoryContainer"> <div class="search-history-title">Áåú‰Ω†ÊÉ≥Êêú</div> </div> `; return container; } function createEngineCircleMenu() { const menu = document.getElementById('engineCircleMenu'); if (!menu) return; menu.innerHTML = '<div class="circle-menu-close-btn" id="circleMenuCloseBtn">√ó</div>'; const centerX = 90; const centerY = 90; const customEngines = JSON.parse(localStorage.getItem('quickerch_custom_engines') || '[]'); const showAddBtn = customEngines.length < 2; const totalItems = showAddBtn ? searchEngines.length + 1 : searchEngines.length; const radius = 65; const angleStep = 360 / totalItems; searchEngines.forEach((engine, index) => { const angle = (index * angleStep - 90) * Math.PI / 180; const x = centerX + radius * Math.cos(angle); const y = centerY + radius * Math.sin(angle); const item = document.createElement('div'); item.className = 'engine-circle-item'; if (index >= 3) { item.classList.add('custom-engine'); } item.style.left = `${x}px`; item.style.top = `${y}px`; item.dataset.index = index; item.dataset.name = engine.name; item.dataset.icon = engine.icon; item.dataset.url = engine.url; item.dataset.initialAngle = index * angleStep - 90; const img = document.createElement('img'); img.src = engine.icon; img.alt = engine.name; img.onerror = () => { img.style.display = 'none'; const fallback = document.createElement('span'); fallback.textContent = engine.name.charAt(0).toUpperCase(); fallback.style.fontSize = '18px'; fallback.style.fontWeight = 'bold'; fallback.style.color = '#666'; item.appendChild(fallback); }; const tooltip = document.createElement('span'); tooltip.textContent = engine.name; item.appendChild(img); item.appendChild(tooltip); if (index >= 3) { const removeBtn = document.createElement('div'); removeBtn.className = 'remove-engine-btn'; removeBtn.innerHTML = '√ó'; removeBtn.dataset.index = index; removeBtn.addEventListener('click', (e) => { e.stopPropagation(); removeCustomEngine(index - 3); }); item.appendChild(removeBtn); } menu.appendChild(item); item.addEventListener('click', (e) => { if (!e.target.closest('.remove-engine-btn')) { e.stopPropagation(); selectEngine(engine); menu.classList.remove('active'); stopCircleAnimation(); } }); }); if (showAddBtn) { const addIndex = searchEngines.length; const addAngle = (addIndex * angleStep - 90) * Math.PI / 180; const addX = centerX + radius * Math.cos(addAngle); const addY = centerY + radius * Math.sin(addAngle); const addItem = document.createElement('div'); addItem.className = 'engine-circle-item add-btn'; addItem.style.left = `${addX}px`; addItem.style.top = `${addY}px`; addItem.dataset.initialAngle = addIndex * angleStep - 90; addItem.innerHTML = '+'; addItem.title = 'Ê∑ªÂä†Ëá™ÂÆö‰πâÊêúÁ¥¢ÂºïÊìé'; const addTooltip = document.createElement('span'); addTooltip.textContent = 'Ê∑ªÂä†Ëá™ÂÆö‰πâ'; addItem.appendChild(addTooltip); menu.appendChild(addItem); addItem.addEventListener('click', (e) => { e.stopPropagation(); openCustomEngineModal(); menu.classList.remove('active'); stopCircleAnimation(); }); } const circleMenuCloseBtn = document.getElementById('circleMenuCloseBtn'); if (circleMenuCloseBtn) { circleMenuCloseBtn.addEventListener('click', (e) => { e.stopPropagation(); menu.classList.remove('active'); stopCircleAnimation(); }); } } function removeCustomEngine(index) { let customEngines = JSON.parse(localStorage.getItem('quickerch_custom_engines') || '[]'); if (index >= 0 && index < customEngines.length) { customEngines.splice(index, 1); localStorage.setItem('quickerch_custom_engines', JSON.stringify(customEngines)); loadCustomEngines(); createEngineCircleMenu(); } } function animateCircleMenu() { const menu = document.getElementById('engineCircleMenu'); if (!menu || !menu.classList.contains('active')) { stopCircleAnimation(); return; } const centerX = 90; const centerY = 90; const radius = 65; const items = menu.querySelectorAll('.engine-circle-item'); const now = Date.now(); if (!circleStartTime) { circleStartTime = now; } const elapsed = (now - circleStartTime) / 1000; const rotationSpeed = 30; items.forEach(item => { const initialAngle = parseFloat(item.dataset.initialAngle); const currentAngle = initialAngle + (elapsed * rotationSpeed) % 360; const rad = currentAngle * Math.PI / 180; const x = centerX + radius * Math.cos(rad); const y = centerY + radius * Math.sin(rad); item.style.left = `${x}px`; item.style.top = `${y}px`; }); circleAnimationId = requestAnimationFrame(animateCircleMenu); } function stopCircleAnimation() { if (circleAnimationId) { cancelAnimationFrame(circleAnimationId); circleAnimationId = null; } circleStartTime = 0; } function selectEngine(engine) { localStorage.setItem('quickerch_search_engine', JSON.stringify(engine)); const currentEngineDisplay = document.getElementById('currentEngineDisplay'); if (currentEngineDisplay) { currentEngineDisplay.innerHTML = ` <img src="${engine.icon}" alt="${engine.name}" onerror="this.style.display='none'; this.parentElement.innerHTML='<span>${engine.name.charAt(0).toUpperCase()}</span>'"> <span>${engine.name}</span> `; } } function createBookmarksContainer() { const container = document.createElement('div'); container.className = 'bookmarks-container'; container.id = 'bookmarksContainer'; return container; } function renderBookmarks(bookmarks) { const bookmarksContainer = document.getElementById('bookmarksContainer'); if (!bookmarksContainer) return; bookmarksContainer.innerHTML = ''; bookmarks.forEach((bookmark, index) => { const wrapper = document.createElement('div'); wrapper.className = 'bookmark-wrapper'; wrapper.dataset.index = index; const bookmarkEl = document.createElement('div'); bookmarkEl.className = 'bookmark'; bookmarkEl.dataset.index = index; const iconContainer = document.createElement('div'); iconContainer.className = 'bookmark-icon'; try { const url = new URL(bookmark.url); const domain = url.hostname.replace('www.', ''); const faviconUrl = `https://${domain}/favicon.ico`; iconContainer.style.backgroundImage = `url('${faviconUrl}')`; iconContainer.addEventListener('error', () => { iconContainer.style.backgroundImage = 'none'; iconContainer.textContent = bookmark.name.charAt(0).toUpperCase(); iconContainer.style.backgroundColor = '#d0d0d0'; iconContainer.style.color = '#666'; }); } catch (e) { iconContainer.textContent = bookmark.name.charAt(0).toUpperCase(); iconContainer.style.backgroundColor = '#d0d0d0'; iconContainer.style.color = '#666'; } const nameEl = document.createElement('div'); nameEl.className = 'bookmark-name'; nameEl.textContent = bookmark.name; const menuBtn = document.createElement('button'); menuBtn.className = 'bookmark-menu-btn'; menuBtn.innerHTML = '‚ãÆ'; menuBtn.dataset.index = index; const menuEl = document.createElement('div'); menuEl.className = 'bookmark-menu'; menuEl.dataset.index = index; const editBtn = document.createElement('div'); editBtn.className = 'bookmark-menu-item'; editBtn.textContent = 'ÁºñËæë'; editBtn.dataset.action = 'edit'; editBtn.dataset.index = index; const removeBtn = document.createElement('div'); removeBtn.className = 'bookmark-menu-item'; removeBtn.textContent = 'ÁßªÈô§'; removeBtn.dataset.action = 'remove'; removeBtn.dataset.index = index; menuEl.appendChild(editBtn); menuEl.appendChild(removeBtn); bookmarkEl.appendChild(iconContainer); bookmarkEl.appendChild(nameEl); wrapper.appendChild(bookmarkEl); wrapper.appendChild(menuBtn); wrapper.appendChild(menuEl); bookmarkEl.addEventListener('click', (e) => { if (!e.target.closest('.bookmark-menu-btn') && !e.target.closest('.bookmark-menu-item')) { window.open(bookmark.url, '_blank'); } }); menuBtn.addEventListener('click', (e) => { e.stopPropagation(); document.querySelectorAll('.bookmark-menu').forEach(m => m.classList.remove('active')); menuEl.classList.add('active'); }); editBtn.addEventListener('click', (e) => { e.stopPropagation(); openEditModal(index); menuEl.classList.remove('active'); }); removeBtn.addEventListener('click', (e) => { e.stopPropagation(); removeBookmark(index); menuEl.classList.remove('active'); }); bookmarksContainer.appendChild(wrapper); }); const addBookmarkEl = document.createElement('div'); addBookmarkEl.className = 'add-bookmark'; addBookmarkEl.addEventListener('click', () => { openAddModal(); }); bookmarksContainer.appendChild(addBookmarkEl); } function loadBookmarks() { const bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); renderBookmarks(bookmarks); } function activateGradientEffect() { logo.classList.add('gradient'); setTimeout(() => { logo.classList.remove('gradient'); }, 1000); } function toggleSearchMode() { if (isPureModeLocked && isSearchMode) { return; } if (!isSearchMode) { activateGradientEffect(); loadCustomEngines(); const searchContainer = createSearchContainer(); let bookmarksContainer = null; if (!settings.enablePureMode) { bookmarksContainer = createBookmarksContainer(); } dynamicContent.appendChild(searchContainer); if (bookmarksContainer) { dynamicContent.appendChild(bookmarksContainer); } setTimeout(() => { searchContainer.classList.add('active'); if (bookmarksContainer) { bookmarksContainer.classList.add('active'); } }, 10); document.body.classList.add('search-mode');  if (settings.useCustomBgInSearchMode && settings.customBackgroundUrl) { document.body.classList.add('custom-bg'); document.body.classList.remove('pure', 'bg1', 'bg2', 'bg3'); } else { document.body.classList.add(settings.searchBackground); } updatePanel.classList.add('hidden'); digitalClock.classList.add('hidden'); if (settings.enableGreeting) { greetingEl.classList.remove('show'); } if (clockInterval) { clearInterval(clockInterval); clockInterval = null; } if (greetingTimeout) { clearTimeout(greetingTimeout); greetingTimeout = null; } setTimeout(() => { createEngineCircleMenu(); setupSearchEvents(); }, 400); if (!settings.enablePureMode && bookmarksContainer) { loadBookmarks(); } isSearchMode = true; } else { document.body.classList.remove('search-mode'); document.body.classList.remove('pure', 'bg1', 'bg2', 'bg3', 'custom-bg'); updatePanel.classList.remove('hidden'); digitalClock.classList.remove('hidden'); stopCircleAnimation(); dynamicContent.innerHTML = ''; startClock(); if (settings.enableGreeting) { updateGreeting(); } isSearchMode = false; } } function setupSearchEvents() { const engineToggleBtn = document.getElementById('engineToggleBtn'); const engineCircleMenu = document.getElementById('engineCircleMenu'); const searchInput = document.getElementById('searchInput'); const searchHistoryContainer = document.getElementById('searchHistoryContainer'); engineToggleBtn.addEventListener('click', (e) => { e.stopPropagation(); engineCircleMenu.classList.add('active'); setTimeout(() => { circleStartTime = Date.now(); animateCircleMenu(); }, 100); }); document.addEventListener('click', (e) => { if (!e.target.closest('.engine-circle-menu') && !e.target.closest('.engine-toggle-btn')) { engineCircleMenu.classList.remove('active'); stopCircleAnimation(); } if (!e.target.closest('.search-history-container') && !e.target.closest('.search-input')) { if (searchHistoryContainer) { searchHistoryContainer.classList.remove('active'); } } }); searchInput.addEventListener('click', (e) => { searchInput.placeholder = ''; searchInput.focus(); displaySearchHistory(searchInput.value); }); searchInput.addEventListener('input', (e) => { displaySearchHistory(e.target.value); }); searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') { const query = searchInput.value.trim(); if (query) { performSearch(query); } } }); } function saveSearchHistory(query) { if (!query.trim()) return; searchHistory = searchHistory.filter(item => item !== query); searchHistory.unshift(query); if (searchHistory.length > 20) { searchHistory = searchHistory.slice(0, 20); } localStorage.setItem('quickerch_search_history', JSON.stringify(searchHistory)); } function displaySearchHistory(filter = '') { const container = document.getElementById('searchHistoryContainer'); if (!container) return; container.innerHTML = '<div class="search-history-title">Áåú‰Ω†ÊÉ≥Êêú</div>'; if (!filter.trim()) { container.classList.remove('active'); return; }  if (!filter.includes(' ') && !filter.includes('.') && filter.length > 0) { const smartItem = document.createElement('div'); smartItem.className = 'search-history-item search-suggestion-item smart-item'; smartItem.innerHTML = `<span>üåêÊô∫ËÉΩ‚Üí</span> ${filter}.com`; smartItem.addEventListener('click', (e) => { e.stopPropagation(); const searchInput = document.getElementById('searchInput'); if (searchInput) { searchInput.value = `${filter}.com`; performSearch(`${filter}.com`); } }); container.appendChild(smartItem); }  const bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); const matchedBookmarks = bookmarks.filter(bookmark => bookmark.name.toLowerCase().includes(filter.toLowerCase()) || bookmark.url.toLowerCase().includes(filter.toLowerCase()) ).slice(0, 3);  matchedBookmarks.forEach(bookmark => { const bookmarkItem = document.createElement('div'); bookmarkItem.className = 'search-history-item search-suggestion-item bookmark-item'; bookmarkItem.innerHTML = `<span>‰π¶Á≠æ‚Üí</span> ${bookmark.name}`; bookmarkItem.addEventListener('click', (e) => { e.stopPropagation(); window.open(bookmark.url, '_blank'); const container = document.getElementById('searchHistoryContainer'); if (container) { container.classList.remove('active'); } }); container.appendChild(bookmarkItem); });  const filtered = searchHistory.filter(item => item.toLowerCase().includes(filter.toLowerCase()) ).slice(0, 5);  if (filtered.length > 0) { filtered.forEach(item => { const historyItem = document.createElement('div'); historyItem.className = 'search-history-item'; historyItem.textContent = item; historyItem.addEventListener('click', (e) => { e.stopPropagation();const searchInput = document.getElementById('searchInput'); if (searchInput) { searchInput.value = item; performSearch(item); } }); container.appendChild(historyItem); });  const clearBtn = document.createElement('div'); clearBtn.className = 'search-history-clear'; clearBtn.textContent = 'Ê∏ÖÈô§ÊêúÁ¥¢ËÆ∞ÂΩï'; clearBtn.addEventListener('click', (e) => { e.stopPropagation(); clearSearchHistory(); container.classList.remove('active'); }); container.appendChild(clearBtn); container.classList.add('active'); } function performSearch(query) { if (!query.trim()) return; saveSearchHistory(query); const currentEngine = initSearchEngine(); const searchUrl = currentEngine.url.replace('{query}', encodeURIComponent(query)); window.open(searchUrl, '_blank'); const searchInput = document.getElementById('searchInput'); if (searchInput) { searchInput.value = ''; } const container = document.getElementById('searchHistoryContainer'); if (container) { container.classList.remove('active'); } } function clearSearchHistory() { searchHistory = []; localStorage.removeItem('quickerch_search_history'); const container = document.getElementById('searchHistoryContainer'); if (container) { container.classList.remove('active'); } alert('ÊêúÁ¥¢ËÆ∞ÂΩïÂ∑≤Ê∏ÖÈô§'); } function openCustomEngineModal() { customEngineName.value = ''; customEngineUrl.value = ''; customEngineModal.classList.add('active'); } function closeCustomEngineModal() { customEngineModal.classList.remove('active'); } customEngineCancelBtn.addEventListener('click', closeCustomEngineModal); customEngineConfirmBtn.addEventListener('click', () => { const name = customEngineName.value.trim(); const url = customEngineUrl.value.trim(); if (!name || !url) { alert('ËØ∑Â°´ÂÜôÊâÄÊúâÂ≠óÊÆµ'); return; } if (!url.includes('{query}')) { alert('ÊêúÁ¥¢URLÂøÖÈ°ªÂåÖÂê´ {query} Âç†‰ΩçÁ¨¶'); return; } let iconUrl = ''; try { const tempUrl = new URL(url.replace('{query}', 'test')); const domain = tempUrl.hostname.replace('www.', ''); iconUrl = `https://${domain}/favicon.ico`; } catch (e) { alert('Êó†ÊïàÁöÑURLÊ†ºÂºè'); return; } const customEngines = JSON.parse(localStorage.getItem('quickerch_custom_engines') || '[]'); if (customEngines.length >= 2) { alert('ÊúÄÂ§öÂè™ËÉΩÊ∑ªÂä†2‰∏™Ëá™ÂÆö‰πâÊêúÁ¥¢ÂºïÊìé'); return; } customEngines.push({ name, icon: iconUrl, url }); localStorage.setItem('quickerch_custom_engines', JSON.stringify(customEngines)); closeCustomEngineModal(); loadCustomEngines(); createEngineCircleMenu(); }); customEngineModal.addEventListener('click', (e) => { if (e.target === customEngineModal) { closeCustomEngineModal(); } }); settingsBtn.addEventListener('click', (e) => { e.stopPropagation(); settingsModal.classList.add('active'); }); settingsCancelBtn.addEventListener('click', () => { settingsModal.classList.remove('active'); }); settingsModal.addEventListener('click', (e) => { if (e.target === settingsModal) { settingsModal.classList.remove('active'); } }); greetingToggle.addEventListener('change', () => { settings.enableGreeting = greetingToggle.checked; saveSettings(); if (settings.enableGreeting) { updateGreeting(); } else { greetingEl.classList.remove('show'); if (greetingTimeout) { clearTimeout(greetingTimeout); greetingTimeout = null; } } }); pureModeToggle.addEventListener('change', () => { settings.enablePureMode = pureModeToggle.checked; isPureModeLocked = settings.enablePureMode; saveSettings(); if (settings.enablePureMode) { digitalClock.classList.add('hidden'); simpleClock.classList.add('show'); updateSimpleClock(); if (simpleClockInterval) clearInterval(simpleClockInterval); simpleClockInterval = setInterval(updateSimpleClock, 60000); if (!isSearchMode) { toggleSearchMode(); } } else { simpleClock.classList.remove('show'); digitalClock.classList.remove('hidden'); clearInterval(simpleClockInterval); simpleClockInterval = null; if (isSearchMode) { const bookmarksContainer = document.getElementById('bookmarksContainer'); if (!bookmarksContainer) { const container = createBookmarksContainer(); dynamicContent.appendChild(container); setTimeout(() => { container.classList.add('active'); loadBookmarks(); }, 10); } } } }); backgroundOptions.forEach(option => { option.addEventListener('click', () => { backgroundOptions.forEach(opt => opt.classList.remove('active')); option.classList.add('active'); settings.searchBackground = option.dataset.bg; saveSettings(); if (isSearchMode) { document.body.classList.remove('pure', 'bg1', 'bg2', 'bg3', 'custom-bg'); document.body.classList.add(settings.searchBackground); } }); }); clearHistoryBtn.addEventListener('click', () => { if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÊêúÁ¥¢ËÆ∞ÂΩïÂêóÔºü')) { clearSearchHistory(); } });  if (applyCustomBgBtn) { applyCustomBgBtn.addEventListener('click', () => { const customBgUrlInput = document.getElementById('customBgUrl'); const customBgSearchMode = document.getElementById('customBgSearchMode'); settings.customBackgroundUrl = customBgUrlInput.value.trim(); settings.useCustomBgInSearchMode = customBgSearchMode.checked; saveSettings(); applyCustomBackground(); alert('Ëá™ÂÆö‰πâËÉåÊôØÂ∑≤Â∫îÁî®'); }); } let clickStartTime = 0; let clickStartPos = { x: 0, y: 0 }; logo.addEventListener('mousedown', (e) => { clickStartTime = Date.now(); clickStartPos = { x: e.clientX, y: e.clientY }; }); logo.addEventListener('mouseup', (e) => { const clickDuration = Date.now() - clickStartTime; const clickEndPos = { x: e.clientX, y: e.clientY }; const distance = Math.sqrt( Math.pow(clickEndPos.x - clickStartPos.x, 2) + Math.pow(clickEndPos.y - clickStartPos.y, 2) ); if (clickDuration < 300 && distance < 10) { toggleSearchMode(); } }); function getBeijingTime() { const now = new Date(); const utc = now.getTime() + (now.getTimezoneOffset() * 60000); const beijingTime = new Date(utc + (3600000 * 8)); return beijingTime; } function updateClock() { const now = getBeijingTime(); const hours = String(now.getHours()).padStart(2, '0'); const minutes = String(now.getMinutes()).padStart(2, '0'); const seconds = String(now.getSeconds()).padStart(2, '0'); digitalClock.textContent = `${hours}:${minutes}:${seconds}`; } function updateSimpleClock() { const now = getBeijingTime(); const hours = String(now.getHours()).padStart(2, '0'); const minutes = String(now.getMinutes()).padStart(2, '0'); simpleClock.textContent = `${hours}:${minutes}`; } function getGreeting() { const hour = getBeijingTime().getHours(); if (hour >= 5 && hour < 12) return 'Êó©‰∏äÂ•Ω'; if (hour >= 12 && hour < 18) return '‰∏≠ÂçàÂ•Ω'; return 'Êôö‰∏äÂ•Ω'; } function updateGreeting() { if (!settings.enableGreeting) { greetingEl.classList.remove('show'); return; } const greeting = getGreeting(); greetingEl.textContent = greeting; greetingEl.classList.remove('show'); setTimeout(() => { greetingEl.classList.add('show'); }, 10); if (greetingTimeout) { clearTimeout(greetingTimeout); } greetingTimeout = setTimeout(() => { greetingEl.classList.remove('show'); }, 5000); } function startClock() { updateClock(); clockInterval = setInterval(updateClock, 1000); } function openAddModal() { modalTitle.textContent = 'Ê∑ªÂä†‰π¶Á≠æ'; bookmarkNameInput.value = ''; bookmarkUrlInput.value = ''; currentEditBookmark = null; modalOverlay.classList.add('active'); } function openEditModal(index) { const bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); const bookmark = bookmarks[index]; modalTitle.textContent = 'ÁºñËæë‰π¶Á≠æ'; bookmarkNameInput.value = bookmark.name; bookmarkUrlInput.value = bookmark.url; currentEditBookmark = index; modalOverlay.classList.add('active'); } function closeModal() { modalOverlay.classList.remove('active'); currentEditBookmark = null; } modalCancelBtn.addEventListener('click', closeModal); modalConfirmBtn.addEventListener('click', () => { const name = bookmarkNameInput.value.trim(); let url = bookmarkUrlInput.value.trim(); if (!name || !url) { alert('ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåURL'); return; } if (!url.startsWith('http://') && !url.startsWith('https://')) { url = 'https://' + url; } try { new URL(url); } catch (e) { alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑURL'); return; } let bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); if (currentEditBookmark !== null) { bookmarks[currentEditBookmark] = { name, url }; } else { bookmarks.push({ name, url }); } localStorage.setItem('quickerch_bookmarks', JSON.stringify(bookmarks)); renderBookmarks(bookmarks); closeModal(); }); modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) { closeModal(); } }); document.addEventListener('click', (e) => { if (!e.target.closest('.bookmark-menu-btn') && !e.target.closest('.bookmark-menu')) { document.querySelectorAll('.bookmark-menu').forEach(m => m.classList.remove('active')); } }); function removeBookmark(index) { if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™‰π¶Á≠æÂêóÔºü')) { let bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); bookmarks.splice(index, 1); localStorage.setItem('quickerch_bookmarks', JSON.stringify(bookmarks)); renderBookmarks(bookmarks); } }  function applyCustomBackground() { const customBgUrl = settings.customBackgroundUrl; const useInSearchMode = settings.useCustomBgInSearchMode; if (customBgUrl) {  const styleId = 'custom-bg-style'; let styleElement = document.getElementById(styleId); if (!styleElement) { styleElement = document.createElement('style'); styleElement.id = styleId; document.head.appendChild(styleElement); } styleElement.textContent = ` body.custom-bg { background-image: url('${customBgUrl}'); } `;  if (useInSearchMode && isSearchMode) { document.body.classList.add('custom-bg'); document.body.classList.remove('pure', 'bg1', 'bg2', 'bg3'); } } else {  document.body.classList.remove('custom-bg'); const styleElement = document.getElementById('custom-bg-style'); if (styleElement) { styleElement.remove(); } } } loadSettings(); loadCustomEngines(); startClock(); if (settings.enableGreeting) { updateGreeting(); } applyCustomBackground(); </script>

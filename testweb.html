<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>第二代轻起始页Alpha</title> <style> * { margin: 0; padding: 0; box-sizing: border-box; } body { background-color: #1a1a1a; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; color: #fff; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; transition: all 0.5s ease; } body.search-mode { background-color: #fff9e6; } .nextgen-badge { position: fixed; right: 20px; top: 20px; background-color: #ff4444; color: white; padding: 8px 12px; border-radius: 4px; font-size: 14px; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.3); z-index: 100; } .greeting { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); font-size: 24px; font-weight: bold; color: #ffd700; opacity: 0; transition: opacity 0.5s ease, transform 0.5s ease; z-index: 90; } .greeting.show { opacity: 1; transform: translateX(-50%) translateY(0); } .logo { cursor: pointer; user-select: none; transition: transform 0.2s ease; z-index: 50; position: relative; display: inline-block; margin-top: 80px; } .logo:hover { transform: scale(1.05); } .logo span:first-child { color: #ffd700; font-weight: bold; font-size: 64px; transition: all 0.3s ease; } .logo span:last-child { color: #ffffff; font-weight: bold; font-size: 56px; transition: all 0.3s ease; } .logo.gradient span { background: linear-gradient(90deg, #ffd700, #ffcc00, #ffb800, #ffa500, #ff8c00); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-size: 300% 100%; animation: gradientShift 0.5s ease infinite; } @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } } .search-container { margin-top: 30px; width: 500px; max-width: 90%; opacity: 0; transform: translateY(-20px); transition: all 0.4s ease; z-index: 70; } .search-container.active { opacity: 1; transform: translateY(0); } .search-box { display: flex; background-color: rgba(255, 255, 255, 0.95); border-radius: 24px; padding: 8px 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); align-items: center; width: 100%; position: relative; } .engine-toggle-btn { width: 40px; height: 40px; background: linear-gradient(135deg, #4da6ff, #3a8ae6); border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; margin-right: 12px; box-shadow: 0 4px 12px rgba(77, 166, 255, 0.4); transition: all 0.3s ease; position: relative; z-index: 100; } .engine-toggle-btn:hover { transform: scale(1.1); box-shadow: 0 6px 16px rgba(77, 166, 255, 0.6); } .engine-toggle-btn::before { content: '≡'; font-size: 20px; color: white; font-weight: bold; } .engine-circle-menu { position: absolute; left: -130px; top: 50%; transform: translateY(-50%) scale(0); width: 200px; height: 200px; display: block; z-index: 9999; opacity: 0; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); } .engine-circle-menu.active { opacity: 1; transform: translateY(-50%) scale(1); } .engine-circle-center { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 40px; height: 40px; background: linear-gradient(135deg, #ff4444, #cc0000); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(255, 68, 68, 0.4); cursor: pointer; transition: all 0.3s ease; z-index: 100; } .engine-circle-center:hover { transform: translate(-50%, -50%) scale(1.1); box-shadow: 0 6px 16px rgba(255, 68, 68, 0.6); } .engine-circle-center::before { content: '×'; color: white; font-size: 24px; font-weight: bold; } .engine-circle-item { position: absolute; left: 50%; top: 50%; width: 50px; height: 50px; border-radius: 50%; background: white; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: pointer; transform: translate(-50%, -50%); transition: all 0.3s ease; z-index: 10; } .engine-circle-item:hover { transform: translate(-50%, -50%) scale(1.2); box-shadow: 0 6px 20px rgba(0,0,0,0.4); z-index: 20; } .engine-circle-item img { width: 36px; height: 36px; border-radius: 50%; object-fit: contain; } .engine-circle-item.add-btn { background: linear-gradient(135deg, #ffd700, #ffb800); color: #000; font-size: 28px; font-weight: bold; } .engine-circle-item span { position: absolute; bottom: -32px; left: 50%; transform: translateX(-50%); font-size: 12px; color: #333; white-space: nowrap; background: rgba(255,255,255,0.95); padding: 4px 8px; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); opacity: 0; transition: opacity 0.2s; } .engine-circle-item:hover span { opacity: 1; } .search-input-container { flex: 1; display: flex; align-items: center; } .search-input { flex: 1; background-color: transparent; border: none; color: #333; font-size: 18px; padding: 12px 16px; outline: none; width: 100%; } .search-input::placeholder { color: #999; } .digital-clock { margin-top: 30px; font-family: 'Courier New', monospace; font-size: 48px; font-weight: bold; color: #ffd700; letter-spacing: 2px; opacity: 1; transition: opacity 0.3s ease; z-index: 30; } .digital-clock.hidden { opacity: 0; } .bookmarks-container { margin-top: 40px; display: flex; flex-wrap: wrap; gap: 16px; justify-content: center; max-width: 464px; opacity: 0; transform: translateY(20px); transition: all 0.4s ease; z-index: 60; } .bookmarks-container.active { opacity: 1; transform: translateY(0); } .bookmark-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; } .bookmark { width: 100px; height: 100px; background-color: rgba(255, 255, 255, 0.9); border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 12px; cursor: pointer; transition: all 0.2s ease; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); } .bookmark:hover { transform: translateY(-4px); box-shadow: 0 6px 16px rgba(0,0,0,0.2); } .bookmark-icon { width: 48px; height: 48px; margin-bottom: 8px; border-radius: 8px; background-color: #e0e0e0; display: flex; align-items: center; justify-content: center; font-size: 24px; color: #666; overflow: hidden; background-size: cover; background-position: center; background-repeat: no-repeat; } .bookmark-name { text-align: center; font-size: 14px; font-weight: 500; color: #333; word-break: break-word; max-height: 36px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; } .bookmark-menu-btn { width: 28px; height: 28px; background-color: #4da6ff; border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; color: white; margin-top: 8px; transition: all 0.2s ease; } .bookmark-menu-btn:hover { background-color: #3a8ae6; transform: scale(1.1); } .bookmark-menu { position: absolute; bottom: -120px; left: 50%; transform: translateX(-50%); background-color: #fff; border-radius: 8px; box-shadow: 0 4px 16px rgba(0,0,0,0.2); padding: 8px 0; min-width: 100px; display: none; z-index: 9000; border: 1px solid #ddd; white-space: nowrap; } .bookmark-menu.active { display: block; } .bookmark-menu-item { padding: 10px 16px; cursor: pointer; transition: background-color 0.2s; font-size: 14px; color: #333; } .bookmark-menu-item:hover { background-color: #f5f5f5; } .add-bookmark { width: 100px; height: 100px; background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid #ffd700; box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2); position: relative; overflow: hidden; } .add-bookmark::before { content: '+'; font-size: 64px; color: #ffd700; font-weight: bold; position: relative; z-index: 2; } .add-bookmark::after { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%); opacity: 0; transition: opacity 0.3s ease; } .add-bookmark:hover::after { opacity: 1; } .add-bookmark:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4); border-color: #ffcc00; } .update-panel { position: fixed; bottom: 30px; right: 30px; background-color: rgba(255, 255, 255, 0.95); border-radius: 12px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); max-width: 300px; z-index: 60; opacity: 1; transition: all 0.4s ease; } .update-panel.hidden { opacity: 0; pointer-events: none; } .update-title { font-size: 16px; font-weight: bold; color: #ff4444; margin-bottom: 12px; border-bottom: 2px solid #ffd700; padding-bottom: 8px; } .update-content { font-size: 14px; color: #333; line-height: 1.6; } .update-beta { margin-top: 12px; padding-top: 12px; border-top: 2px dashed #ffd700; font-size: 13px; color: #ff4444; font-weight: bold; } .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.7); display: none; align-items: center; justify-content: center; z-index: 2000; } .modal-overlay.active { display: flex; } .modal { background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%); border-radius: 16px; padding: 32px; width: 400px; max-width: 90%; box-shadow: 0 8px 32px rgba(0,0,0,0.2); border: 1px solid #ddd; } .modal-title { font-size: 20px; font-weight: bold; margin-bottom: 24px; color: #ff4444; text-align: center; } .modal-input-group { margin-bottom: 16px; } .modal-label { display: block; margin-bottom: 8px; font-size: 14px; color: #666; } .modal-input { width: 100%; padding: 12px 16px; background-color: #fff; border: 1px solid #ddd; border-radius: 8px; color: #333; font-size: 16px; outline: none; transition: all 0.2s; } .modal-input:focus { border-color: #ffd700; box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2); } .modal-buttons { display: flex; gap: 12px; margin-top: 24px; } .modal-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.2s; } .modal-btn-cancel { background-color: #f0f0f0; color: #333; } .modal-btn-cancel:hover { background-color: #e0e0e0; transform: translateY(-2px); } .modal-btn-confirm { background: linear-gradient(135deg, #ffd700 0%, #ffb800 100%); color: #000; } .modal-btn-confirm:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4); } .engine-btn { background: none; border: none; cursor: pointer; padding: 0; margin: 0; } .current-engine-display { position: absolute; right: 16px; top: 50%; transform: translateY(-50%); display: flex; align-items: center; font-size: 14px; color: #666; } .current-engine-display img { width: 20px; height: 20px; border-radius: 50%; margin-right: 6px; } </style> </head> <body> <div class="nextgen-badge">1.1.1Alpha</div> <div class="greeting" id="greeting"></div> <div class="logo" id="quickerchLogo"> <span>Quick</span><span>erch</span> </div> <div id="dynamicContent"></div> <div class="digital-clock" id="digitalClock">00:00:00</div> <div class="update-panel" id="updatePanel"> <div class="update-title">更新日志</div> <div class="update-content">v1.1.4-2Dev(开发者版本):优化自定义菜单功能</div> <div class="update-beta">Beta版即将到来……</div> </div> <div class="modal-overlay" id="modalOverlay"> <div class="modal"> <div class="modal-title" id="modalTitle">添加书签</div> <div class="modal-input-group"> <label class="modal-label">名称</label> <input type="text" class="modal-input" id="bookmarkNameInput" placeholder="输入书签名称"> </div> <div class="modal-input-group"> <label class="modal-label">URL</label> <input type="text" class="modal-input" id="bookmarkUrlInput" placeholder="输入网址，例如：https://www.baidu.com"> </div> <div class="modal-buttons"> <button class="modal-btn modal-btn-cancel" id="modalCancelBtn">取消</button> <button class="modal-btn modal-btn-confirm" id="modalConfirmBtn">确定</button> </div> </div> </div> <div class="modal-overlay" id="customEngineModal"> <div class="modal"> <div class="modal-title">添加自定义搜索引擎(Beta)</div> <div class="modal-input-group"> <label class="modal-label">名称</label> <input type="text" class="modal-input" id="customEngineName" placeholder="例如：Google"> </div> <div class="modal-input-group"> <label class="modal-label">图标URL</label> <input type="text" class="modal-input" id="customEngineIcon" placeholder="例如：https://www.google.com/favicon.ico"> </div> <div class="modal-input-group"> <label class="modal-label">搜索URL（使用 {query} 作为占位符）</label> <input type="text" class="modal-input" id="customEngineUrl" placeholder="例如：https://www.google.com/search?q={query}"> </div> <div class="modal-buttons"> <button class="modal-btn modal-btn-cancel" id="customEngineCancelBtn">取消</button> <button class="modal-btn modal-btn-confirm" id="customEngineConfirmBtn">确定</button> </div> </div> </div> <script> const logo = document.getElementById('quickerchLogo'); const dynamicContent = document.getElementById('dynamicContent'); const digitalClock = document.getElementById('digitalClock'); const greetingEl = document.getElementById('greeting'); const modalOverlay = document.getElementById('modalOverlay'); const modalTitle = document.getElementById('modalTitle'); const bookmarkNameInput = document.getElementById('bookmarkNameInput'); const bookmarkUrlInput = document.getElementById('bookmarkUrlInput'); const modalCancelBtn = document.getElementById('modalCancelBtn'); const modalConfirmBtn = document.getElementById('modalConfirmBtn'); const updatePanel = document.getElementById('updatePanel'); const customEngineModal = document.getElementById('customEngineModal'); const customEngineName = document.getElementById('customEngineName'); const customEngineIcon = document.getElementById('customEngineIcon'); const customEngineUrl = document.getElementById('customEngineUrl'); const customEngineCancelBtn = document.getElementById('customEngineCancelBtn'); const customEngineConfirmBtn = document.getElementById('customEngineConfirmBtn'); let isSearchMode = false; let clockInterval = null; let greetingTimeout = null; let currentEditBookmark = null; let circleAnimationId = null; let circleStartTime = 0; let searchEngines = [ { name: '百度', icon: 'https://www.baidu.com/favicon.ico', url: 'https://www.baidu.com/s?wd=' }, { name: 'Bing', icon: 'https://cn.bing.com/favicon.ico', url: 'https://cn.bing.com/search?q=' }, { name: 'Yandex', icon: 'https://yandex.com/favicon.ico', url: 'https://yandex.com/search/?text=' } ]; function loadCustomEngines() { const customEngines = JSON.parse(localStorage.getItem('quickerch_custom_engines') || '[]'); searchEngines = [ { name: '百度', icon: 'https://www.baidu.com/favicon.ico', url: 'https://www.baidu.com/s?wd=' }, { name: 'Bing', icon: 'https://cn.bing.com/favicon.ico', url: 'https://cn.bing.com/search?q=' }, { name: 'Yandex', icon: 'https://yandex.com/favicon.ico', url: 'https://yandex.com/search/?text=' }, ...customEngines ]; } function initSearchEngine() { const savedEngine = localStorage.getItem('quickerch_search_engine'); if (savedEngine) { try { const engineData = JSON.parse(savedEngine); return engineData; } catch (e) { console.error('Failed to parse saved engine:', e); } } return searchEngines[0]; } function createSearchContainer() { const currentEngine = initSearchEngine(); const container = document.createElement('div'); container.className = 'search-container'; container.id = 'searchContainer'; container.innerHTML = ` <div class="search-box"> <button class="engine-toggle-btn" id="engineToggleBtn"></button> <div class="engine-circle-menu" id="engineCircleMenu"> <div class="engine-circle-center" id="engineCircleClose"></div> </div> <div class="search-input-container"> <input type="text" class="search-input" id="searchInput" placeholder="测试中…" autocomplete="off"> </div> <div class="current-engine-display" id="currentEngineDisplay"> <img src="${currentEngine.icon}" alt="${currentEngine.name}"> <span>${currentEngine.name}</span> </div> </div> `; return container; } function createEngineCircleMenu() { const menu = document.getElementById('engineCircleMenu'); if (!menu) return; menu.innerHTML = '<div class="engine-circle-center" id="engineCircleClose"></div>'; const centerX = 100; const centerY = 100; const customEngines = JSON.parse(localStorage.getItem('quickerch_custom_engines') || '[]'); const showAddBtn = customEngines.length < 2; const totalItems = showAddBtn ? searchEngines.length + 1 : searchEngines.length; const radius = 70; const angleStep = 360 / totalItems; searchEngines.forEach((engine, index) => { const angle = (index * angleStep - 90) * Math.PI / 180; const x = centerX + radius * Math.cos(angle); const y = centerY + radius * Math.sin(angle); const item = document.createElement('div'); item.className = 'engine-circle-item'; item.style.left = `${x}px`; item.style.top = `${y}px`; item.dataset.index = index; item.dataset.name = engine.name; item.dataset.icon = engine.icon; item.dataset.url = engine.url; item.dataset.initialAngle = index * angleStep - 90; const img = document.createElement('img'); img.src = engine.icon; img.alt = engine.name; const tooltip = document.createElement('span'); tooltip.textContent = engine.name; item.appendChild(img); item.appendChild(tooltip); menu.appendChild(item); item.addEventListener('click', (e) => { e.stopPropagation(); selectEngine(engine); menu.classList.remove('active'); stopCircleAnimation(); }); }); if (showAddBtn) { const addIndex = searchEngines.length; const addAngle = (addIndex * angleStep - 90) * Math.PI / 180; const addX = centerX + radius * Math.cos(addAngle); const addY = centerY + radius * Math.sin(addAngle); const addItem = document.createElement('div'); addItem.className = 'engine-circle-item add-btn'; addItem.style.left = `${addX}px`; addItem.style.top = `${addY}px`; addItem.dataset.initialAngle = addIndex * angleStep - 90; addItem.innerHTML = '+'; addItem.title = '添加自定义搜索引擎'; const addTooltip = document.createElement('span'); addTooltip.textContent = '添加自定义'; addItem.appendChild(addTooltip); menu.appendChild(addItem); addItem.addEventListener('click', (e) => { e.stopPropagation(); openCustomEngineModal(); menu.classList.remove('active'); stopCircleAnimation(); }); } } function animateCircleMenu() { const menu = document.getElementById('engineCircleMenu'); if (!menu || !menu.classList.contains('active')) { stopCircleAnimation(); return; } const centerX = 100; const centerY = 100; const radius = 70; const items = menu.querySelectorAll('.engine-circle-item'); const now = Date.now(); if (!circleStartTime) { circleStartTime = now; } const elapsed = (now - circleStartTime) / 1000; const rotationSpeed = 30; items.forEach(item => { const initialAngle = parseFloat(item.dataset.initialAngle); const currentAngle = initialAngle + (elapsed * rotationSpeed) % 360; const rad = currentAngle * Math.PI / 180; const x = centerX + radius * Math.cos(rad); const y = centerY + radius * Math.sin(rad); item.style.left = `${x}px`; item.style.top = `${y}px`; }); circleAnimationId = requestAnimationFrame(animateCircleMenu); } function stopCircleAnimation() { if (circleAnimationId) { cancelAnimationFrame(circleAnimationId); circleAnimationId = null; } circleStartTime = 0; } function selectEngine(engine) { localStorage.setItem('quickerch_search_engine', JSON.stringify(engine)); const currentEngineDisplay = document.getElementById('currentEngineDisplay'); if (currentEngineDisplay) { currentEngineDisplay.innerHTML = ` <img src="${engine.icon}" alt="${engine.name}"> <span>${engine.name}</span> `; } } function createBookmarksContainer() { const container = document.createElement('div'); container.className = 'bookmarks-container'; container.id = 'bookmarksContainer'; return container; } function renderBookmarks(bookmarks) { const bookmarksContainer = document.getElementById('bookmarksContainer'); if (!bookmarksContainer) return; bookmarksContainer.innerHTML = ''; bookmarks.forEach((bookmark, index) => { const wrapper = document.createElement('div'); wrapper.className = 'bookmark-wrapper'; wrapper.dataset.index = index; const bookmarkEl = document.createElement('div'); bookmarkEl.className = 'bookmark'; bookmarkEl.dataset.index = index; const iconContainer = document.createElement('div'); iconContainer.className = 'bookmark-icon'; try { const url = new URL(bookmark.url); const domain = url.hostname.replace('www.', ''); const faviconUrl = `https://${domain}/favicon.ico`; iconContainer.style.backgroundImage = `url('${faviconUrl}')`; iconContainer.addEventListener('error', () => { iconContainer.style.backgroundImage = 'none'; iconContainer.textContent = bookmark.name.charAt(0).toUpperCase(); iconContainer.style.backgroundColor = '#d0d0d0'; iconContainer.style.color = '#666'; }); } catch (e) { iconContainer.textContent = bookmark.name.charAt(0).toUpperCase(); iconContainer.style.backgroundColor = '#d0d0d0'; iconContainer.style.color = '#666'; } const nameEl = document.createElement('div'); nameEl.className = 'bookmark-name'; nameEl.textContent = bookmark.name; const menuBtn = document.createElement('button'); menuBtn.className = 'bookmark-menu-btn'; menuBtn.innerHTML = '⋮'; menuBtn.dataset.index = index; const menuEl = document.createElement('div'); menuEl.className = 'bookmark-menu'; menuEl.dataset.index = index; const editBtn = document.createElement('div'); editBtn.className = 'bookmark-menu-item'; editBtn.textContent = '编辑'; editBtn.dataset.action = 'edit'; editBtn.dataset.index = index; const removeBtn = document.createElement('div'); removeBtn.className = 'bookmark-menu-item'; removeBtn.textContent = '移除'; removeBtn.dataset.action = 'remove'; removeBtn.dataset.index = index; menuEl.appendChild(editBtn); menuEl.appendChild(removeBtn); bookmarkEl.appendChild(iconContainer); bookmarkEl.appendChild(nameEl); wrapper.appendChild(bookmarkEl); wrapper.appendChild(menuBtn); wrapper.appendChild(menuEl); bookmarkEl.addEventListener('click', (e) => { if (!e.target.closest('.bookmark-menu-btn') && !e.target.closest('.bookmark-menu-item')) { window.open(bookmark.url, '_blank'); } }); menuBtn.addEventListener('click', (e) => { e.stopPropagation(); document.querySelectorAll('.bookmark-menu').forEach(m => m.classList.remove('active')); menuEl.classList.add('active'); }); editBtn.addEventListener('click', (e) => { e.stopPropagation(); openEditModal(index); menuEl.classList.remove('active'); }); removeBtn.addEventListener('click', (e) => { e.stopPropagation(); removeBookmark(index); menuEl.classList.remove('active'); }); bookmarksContainer.appendChild(wrapper); }); const addBookmarkEl = document.createElement('div'); addBookmarkEl.className = 'add-bookmark'; addBookmarkEl.addEventListener('click', () => { openAddModal(); }); bookmarksContainer.appendChild(addBookmarkEl); } function loadBookmarks() { const bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); renderBookmarks(bookmarks); } function activateGradientEffect() { logo.classList.add('gradient'); setTimeout(() => { logo.classList.remove('gradient'); }, 1000); } function toggleSearchMode() { if (!isSearchMode) { activateGradientEffect(); loadCustomEngines(); const searchContainer = createSearchContainer(); const bookmarksContainer = createBookmarksContainer(); dynamicContent.appendChild(searchContainer); dynamicContent.appendChild(bookmarksContainer); setTimeout(() => { searchContainer.classList.add('active'); bookmarksContainer.classList.add('active'); }, 10); document.body.classList.add('search-mode'); updatePanel.classList.add('hidden'); digitalClock.classList.add('hidden'); greetingEl.classList.remove('show'); if (clockInterval) { clearInterval(clockInterval); clockInterval = null; } if (greetingTimeout) { clearTimeout(greetingTimeout); greetingTimeout = null; } setTimeout(() => { createEngineCircleMenu(); setupSearchEvents(); const searchInput = document.getElementById('searchInput'); if (searchInput) searchInput.focus(); }, 400); loadBookmarks(); isSearchMode = true; } else { document.body.classList.remove('search-mode'); updatePanel.classList.remove('hidden'); digitalClock.classList.remove('hidden'); stopCircleAnimation(); dynamicContent.innerHTML = ''; startClock(); updateGreeting(); isSearchMode = false; } } function setupSearchEvents() { const engineToggleBtn = document.getElementById('engineToggleBtn'); const engineCircleMenu = document.getElementById('engineCircleMenu'); const engineCircleClose = document.getElementById('engineCircleClose'); const searchInput = document.getElementById('searchInput'); engineToggleBtn.addEventListener('click', (e) => { e.stopPropagation(); engineCircleMenu.classList.add('active'); setTimeout(() => { circleStartTime = Date.now(); animateCircleMenu(); }, 100); }); engineCircleClose.addEventListener('click', (e) => { e.stopPropagation(); engineCircleMenu.classList.remove('active'); stopCircleAnimation(); }); document.addEventListener('click', (e) => { if (!e.target.closest('.engine-circle-menu') && !e.target.closest('.engine-toggle-btn')) { engineCircleMenu.classList.remove('active'); stopCircleAnimation(); } }); searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') { const query = searchInput.value.trim(); if (query) { const currentEngine = initSearchEngine(); const searchUrl = currentEngine.url.replace('{query}', encodeURIComponent(query)); window.open(searchUrl, '_blank'); searchInput.value = ''; } } }); } function openCustomEngineModal() { customEngineName.value = ''; customEngineIcon.value = ''; customEngineUrl.value = ''; customEngineModal.classList.add('active'); } function closeCustomEngineModal() { customEngineModal.classList.remove('active'); } customEngineCancelBtn.addEventListener('click', closeCustomEngineModal); customEngineConfirmBtn.addEventListener('click', () => { const name = customEngineName.value.trim(); const icon = customEngineIcon.value.trim(); const url = customEngineUrl.value.trim(); if (!name || !icon || !url) { alert('请填写所有字段'); return; } if (!url.includes('{query}')) { alert('搜索URL必须包含 {query} 占位符'); return; } const customEngines = JSON.parse(localStorage.getItem('quickerch_custom_engines') || '[]'); if (customEngines.length >= 2) { alert('最多只能添加2个自定义搜索引擎'); return; } customEngines.push({ name, icon, url }); localStorage.setItem('quickerch_custom_engines', JSON.stringify(customEngines)); closeCustomEngineModal(); loadCustomEngines(); createEngineCircleMenu(); }); customEngineModal.addEventListener('click', (e) => { if (e.target === customEngineModal) { closeCustomEngineModal(); } }); let clickStartTime = 0; let clickStartPos = { x: 0, y: 0 }; logo.addEventListener('mousedown', (e) => { clickStartTime = Date.now(); clickStartPos = { x: e.clientX, y: e.clientY }; }); logo.addEventListener('mouseup', (e) => { const clickDuration = Date.now() - clickStartTime; const clickEndPos = { x: e.clientX, y: e.clientY }; const distance = Math.sqrt( Math.pow(clickEndPos.x - clickStartPos.x, 2) + Math.pow(clickEndPos.y - clickStartPos.y, 2) ); if (clickDuration < 300 && distance < 10) { toggleSearchMode(); } }); function getBeijingTime() { const now = new Date(); const utc = now.getTime() + (now.getTimezoneOffset() * 60000); const beijingTime = new Date(utc + (3600000 * 8)); return beijingTime; } function updateClock() { const now = getBeijingTime(); const hours = String(now.getHours()).padStart(2, '0'); const minutes = String(now.getMinutes()).padStart(2, '0'); const seconds = String(now.getSeconds()).padStart(2, '0'); digitalClock.textContent = `${hours}:${minutes}:${seconds}`; } function getGreeting() { const hour = getBeijingTime().getHours(); if (hour >= 5 && hour < 12) return '早上好'; if (hour >= 12 && hour < 18) return '中午好'; return '晚上好'; } function updateGreeting() { const greeting = getGreeting(); greetingEl.textContent = greeting; greetingEl.classList.remove('show'); setTimeout(() => { greetingEl.classList.add('show'); }, 10); if (greetingTimeout) { clearTimeout(greetingTimeout); } greetingTimeout = setTimeout(() => { greetingEl.classList.remove('show'); }, 5000); } function startClock() { updateClock(); clockInterval = setInterval(updateClock, 1000); } function openAddModal() { modalTitle.textContent = '添加书签'; bookmarkNameInput.value = ''; bookmarkUrlInput.value = ''; currentEditBookmark = null; modalOverlay.classList.add('active'); } function openEditModal(index) { const bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); const bookmark = bookmarks[index]; modalTitle.textContent = '编辑书签'; bookmarkNameInput.value = bookmark.name; bookmarkUrlInput.value = bookmark.url; currentEditBookmark = index; modalOverlay.classList.add('active'); } function closeModal() { modalOverlay.classList.remove('active'); currentEditBookmark = null; } modalCancelBtn.addEventListener('click', closeModal); modalConfirmBtn.addEventListener('click', () => { const name = bookmarkNameInput.value.trim(); let url = bookmarkUrlInput.value.trim(); if (!name || !url) { alert('请填写名称和URL'); return; } if (!url.startsWith('http://') && !url.startsWith('https://')) { url = 'https://' + url; } try { new URL(url); } catch (e) { alert('请输入有效的URL'); return; } let bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); if (currentEditBookmark !== null) { bookmarks[currentEditBookmark] = { name, url }; } else { bookmarks.push({ name, url }); } localStorage.setItem('quickerch_bookmarks', JSON.stringify(bookmarks)); renderBookmarks(bookmarks); closeModal(); }); modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) { closeModal(); } }); document.addEventListener('click', (e) => { if (!e.target.closest('.bookmark-menu-btn') && !e.target.closest('.bookmark-menu')) { document.querySelectorAll('.bookmark-menu').forEach(m => m.classList.remove('active')); } }); function removeBookmark(index) { if (confirm('确定要删除这个书签吗？')) { let bookmarks = JSON.parse(localStorage.getItem('quickerch_bookmarks') || '[]'); bookmarks.splice(index, 1); localStorage.setItem('quickerch_bookmarks', JSON.stringify(bookmarks)); renderBookmarks(bookmarks); } } startClock(); updateGreeting(); </script> </body> </html>
